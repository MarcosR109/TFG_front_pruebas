<button mat-raised-button (click)="togglePreferirSostenidos()"># / b</button>
<div class="grid-container">
  <div
    *ngFor="let linea of lines; let index = index"
    class="input-group"
    [style.width]="maxWidth"
  >
    <div class="square-container" [style.width]="maxWidth">
      <mat-card
        class="square"
        *ngFor="let acorde of linea.acordes; let squareIndex = index"
        dndDropzone
        (dndDrop)="onDrop($event, linea, squareIndex)"
      >
        <!-- Botón "x" para limpiar el contenido textual (solo visible si hay contenido) -->
        <button
          *ngIf="acorde.acorde"
          class="delete-button"
          (click)="eliminarAcorde(linea.nLinea, squareIndex)"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            height="15px"
            viewBox="0 -960 960 960"
            width="15px"
            fill="#999999"
          >
            <path
              d="m291-240-51-51 189-189-189-189 51-51 189 189 189-189 51 51-189 189 189 189-51 51-189-189-189 189Z"
            />
          </svg>
        </button>
        <!-- Contenido del acorde -->
        <div class="square-content">
          {{ transformToEnarmonic(acorde.acorde || "")
          }}<span *ngIf="acorde.variacion">{{ acorde.variacion }}</span>
        </div>
      </mat-card>
    </div>
    <!-- Campo de entrada de texto -->
    <mat-form-field
      appearance="outline"
      class="input-field"
      [style.width]="maxWidth"
    >
      <input matInput [(ngModel)]="linea.letra" placeholder="Texto recibido" />
    </mat-form-field>
    <div class="button-container">
      <button
        mat-raised-button
        class="add-line-btn"
        color="secondary"
        (click)="agregarLineaDebajo(index)"
      >
        +
      </button>
      <button
        mat-raised-button
        color="secondary"
        class="delete-line-btn"
        (click)="eliminarLinea(index)"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          height="20px"
          viewBox="0 0 24 24"
          width="20px"
          fill="#000000"
        >
          <path d="M0 0h24v24H0V0z" fill="none" />
          <path
            d="M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"
          />
        </svg>
      </button>
    </div>
  </div>
</div>
<aside>
  <div class="contenedor">
    <!-- Contenedor de Acordes (Expandible con animación) -->
    <div
      class="acordes-container"
      [@expandir]="tonalidadExpandida ? 'expandido' : 'colapsado'"
    >
      <div
        *ngFor="
          let acorde of getAcordesDeTonalidad(tonalidadExpandida);
          trackBy: trackByAcorde
        "
        class="acorde-box"
        [dndDraggable]="acorde"
      >
        {{ acorde.acorde }}
      </div>
    </div>

    <!-- Lista de Tonalidades -->
    <div class="tonalidades-container">
      <div
        *ngFor="let tonalidad of tonalidades"
        class="tonalidad-box"
        [class.seleccionada]="tonalidadExpandida === tonalidad"
        (click)="seleccionarTonalidad(tonalidad)"
      >
        {{ tonalidad }}
      </div>
    </div>
  </div>
</aside>
<!--<div class="variaciones-container" [class.arriba]="menuArriba">
  <div class="variaciones-slider">
    <button
      *ngFor="let variacion of variaciones"
      class="variacion-btn"
      [dndDraggable]="variacion"
    >
      {{ variacion }}
    </button>
  </div>
</div>-->
